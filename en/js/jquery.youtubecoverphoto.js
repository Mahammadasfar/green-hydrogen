$.fn.youtubeCoverPhoto=function(o){var e=this,t={};return t.options=o||{},t.options.background="background"in t.options&&!!t.options.background,t.options.useMaxRes=!("useMaxRes"in t.options)||!!t.options.useMaxRes,t.photoLevels=["hqdefault","mqdefault","0"],t.options.useMaxRes&&t.photoLevels.unshift("maxresdefault"),t.process=function(){e.each(function(){t.processItem($(this))})},t.getSrcUrl=function(o,e){var n=t.photoLevels[e];return n?"https://img.youtube.com/vi/"+o+"/"+n+".jpg":null},t.getYoutubeId=function(o){return $(o).data("youtube-id")},t.processItem=function(o,e){var n=t.getYoutubeId(o);if(n&&n.length){void 0===e&&(e=0);var s=t.getSrcUrl(n,e),a=new Image;a.target=o[0],$(a).on("load",null,{image:a,target:o[0],resolutionIndex:e},t.onloadHandler),a.src=s}},t.onloadHandler=function(o){var e=o.data.image,n=$(o.data.target),s=o.data.resolutionIndex,a=t.getYoutubeId(n);$(e).off("load",t.onloadHandler),setTimeout(function(){if(!t.imageIsValid(e))return s++,void(t.getSrcUrl(a,s)&&t.processItem(n,s));t.assignLoadedImage(n,e.src)})},t.assignLoadedImage=function(o,e){t.options.background?o.css("background-image","url("+e+")"):o.attr("src",e),o.css("visibility","visible")},t.imageIsValid=function(o){return o.width>120},e.on("update",function(){t.process()}),t.process(),t};